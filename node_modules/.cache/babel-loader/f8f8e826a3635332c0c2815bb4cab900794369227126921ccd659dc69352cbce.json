{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axios from'axios';import{useAuth}from'./AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookListPage=()=>{const[books,setBooks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const{user}=useAuth();useEffect(()=>{if(user&&user.isAdmin){fetchBooks();}},[user]);const fetchBooks=async()=>{try{setLoading(true);const res=await axios.get('/api/books');setBooks(res.data);setError(null);}catch(err){setError('Failed to fetch books');console.error(err);}finally{setLoading(false);}};const handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this book?')){try{await axios.delete(\"/api/books/\".concat(id));setBooks(books.filter(book=>book._id!==id));}catch(err){setError('Failed to delete book');console.error(err);}}};if(!user||!user.isAdmin){return/*#__PURE__*/_jsx(\"div\",{children:\"Access denied. Admin only.\"});}if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{children:error});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Book Management\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/book/new\",className:\"btn\",children:\"Add New Book\"}),/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Author\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Stock\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:books.map(book=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:/*#__PURE__*/_jsx(\"img\",{src:book.imageUrl||'/placeholder-book.jpg',alt:book.title,style:{width:'50px',height:'70px',objectFit:'cover'}})}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:book.title}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:book.author}),/*#__PURE__*/_jsxs(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:[\"\\u20B9\",(book.price*83).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:book.stock}),/*#__PURE__*/_jsxs(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/book/\".concat(book._id,\"/edit\"),className:\"btn\",style:{marginRight:'10px'},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(book._id),className:\"btn\",children:\"Delete\"})]})]},book._id))})]})]});};export default BookListPage;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","useAuth","jsx","_jsx","jsxs","_jsxs","BookListPage","books","setBooks","loading","setLoading","error","setError","user","isAdmin","fetchBooks","res","get","data","err","console","handleDelete","id","window","confirm","delete","concat","filter","book","_id","children","to","className","style","width","borderCollapse","marginTop","border","padding","map","src","imageUrl","alt","title","height","objectFit","author","price","toFixed","stock","marginRight","onClick"],"sources":["C:/Users/koushik reddy/Desktop/ebooksore_08/src/BookListPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst BookListPage = () => {\r\n  const [books, setBooks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (user && user.isAdmin) {\r\n      fetchBooks();\r\n    }\r\n  }, [user]);\r\n\r\n  const fetchBooks = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get('/api/books');\r\n      setBooks(res.data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError('Failed to fetch books');\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this book?')) {\r\n      try {\r\n        await axios.delete(`/api/books/${id}`);\r\n        setBooks(books.filter(book => book._id !== id));\r\n      } catch (err) {\r\n        setError('Failed to delete book');\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!user || !user.isAdmin) {\r\n    return <div>Access denied. Admin only.</div>;\r\n  }\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div>{error}</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h1>Book Management</h1>\r\n      <Link to=\"/admin/book/new\" className=\"btn\">Add New Book</Link>\r\n      <table style={{ width: '100%', borderCollapse: 'collapse', marginTop: '20px' }}>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Image</th>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Title</th>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Author</th>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Price</th>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Stock</th>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {books.map(book => (\r\n            <tr key={book._id}>\r\n              <td style={{ border: '1px solid #ddd', padding: '8px' }}>\r\n                <img src={book.imageUrl || '/placeholder-book.jpg'} alt={book.title} style={{ width: '50px', height: '70px', objectFit: 'cover' }} />\r\n              </td>\r\n              <td style={{ border: '1px solid #ddd', padding: '8px' }}>{book.title}</td>\r\n              <td style={{ border: '1px solid #ddd', padding: '8px' }}>{book.author}</td>\r\n              <td style={{ border: '1px solid #ddd', padding: '8px' }}>â‚¹{(book.price * 83).toFixed(2)}</td>\r\n              <td style={{ border: '1px solid #ddd', padding: '8px' }}>{book.stock}</td>\r\n              <td style={{ border: '1px solid #ddd', padding: '8px' }}>\r\n                <Link to={`/admin/book/${book._id}/edit`} className=\"btn\" style={{ marginRight: '10px' }}>Edit</Link>\r\n                <button onClick={() => handleDelete(book._id)} className=\"btn\">Delete</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookListPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}