{"ast":null,"code":"import _objectSpread from\"C:/Users/koushik reddy/AppData/Local/npm-cache/_npx/cd53aabf71f3f793/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export const useCart=()=>{return useContext(CartContext);};export const CartProvider=_ref=>{let{children}=_ref;const[cartItems,setCartItems]=useState([]);useEffect(()=>{const savedCart=localStorage.getItem('cart');if(savedCart){setCartItems(JSON.parse(savedCart));}},[]);useEffect(()=>{localStorage.setItem('cart',JSON.stringify(cartItems));},[cartItems]);const addToCart=book=>{setCartItems(prevItems=>{const existingItem=prevItems.find(item=>item._id===book._id);if(existingItem){return prevItems.map(item=>item._id===book._id?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+1}):item);}else{return[...prevItems,_objectSpread(_objectSpread({},book),{},{quantity:1})];}});};const removeFromCart=id=>{setCartItems(prevItems=>prevItems.filter(item=>item._id!==id));};const updateQuantity=(id,quantity)=>{if(quantity<=0){removeFromCart(id);}else{setCartItems(prevItems=>prevItems.map(item=>item._id===id?_objectSpread(_objectSpread({},item),{},{quantity}):item));}};const clearCart=()=>{setCartItems([]);};const getCartTotal=()=>{return cartItems.reduce((total,item)=>total+item.price*item.quantity,0);};const getCartCount=()=>{return cartItems.reduce((count,item)=>count+item.quantity,0);};const value={cartItems,addToCart,removeFromCart,updateQuantity,clearCart,getCartTotal,getCartCount};return/*#__PURE__*/_jsx(CartContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","CartContext","useCart","CartProvider","_ref","children","cartItems","setCartItems","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","book","prevItems","existingItem","find","item","_id","map","_objectSpread","quantity","removeFromCart","id","filter","updateQuantity","clearCart","getCartTotal","reduce","total","price","getCartCount","count","value","Provider"],"sources":["C:/Users/koushik reddy/Desktop/ebooksore_08/src/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const useCart = () => {\r\n  return useContext(CartContext);\r\n};\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const savedCart = localStorage.getItem('cart');\r\n    if (savedCart) {\r\n      setCartItems(JSON.parse(savedCart));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('cart', JSON.stringify(cartItems));\r\n  }, [cartItems]);\r\n\r\n  const addToCart = (book) => {\r\n    setCartItems(prevItems => {\r\n      const existingItem = prevItems.find(item => item._id === book._id);\r\n      if (existingItem) {\r\n        return prevItems.map(item =>\r\n          item._id === book._id ? { ...item, quantity: item.quantity + 1 } : item\r\n        );\r\n      } else {\r\n        return [...prevItems, { ...book, quantity: 1 }];\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeFromCart = (id) => {\r\n    setCartItems(prevItems => prevItems.filter(item => item._id !== id));\r\n  };\r\n\r\n  const updateQuantity = (id, quantity) => {\r\n    if (quantity <= 0) {\r\n      removeFromCart(id);\r\n    } else {\r\n      setCartItems(prevItems =>\r\n        prevItems.map(item =>\r\n          item._id === id ? { ...item, quantity } : item\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCartItems([]);\r\n  };\r\n\r\n  const getCartTotal = () => {\r\n    return cartItems.reduce((total, item) => total + item.price * item.quantity, 0);\r\n  };\r\n\r\n  const getCartCount = () => {\r\n    return cartItems.reduce((count, item) => count + item.quantity, 0);\r\n  };\r\n\r\n  const value = {\r\n    cartItems,\r\n    addToCart,\r\n    removeFromCart,\r\n    updateQuantity,\r\n    clearCart,\r\n    getCartTotal,\r\n    getCartCount\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={value}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"yJAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,MAAO,MAAM,CAAAO,OAAO,CAAGA,CAAA,GAAM,CAC3B,MAAO,CAAAN,UAAU,CAACK,WAAW,CAAC,CAChC,CAAC,CAED,MAAO,MAAM,CAAAE,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAE9CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC9C,GAAIF,SAAS,CAAE,CACbD,YAAY,CAACI,IAAI,CAACC,KAAK,CAACJ,SAAS,CAAC,CAAC,CACrC,CACF,CAAC,CAAE,EAAE,CAAC,CAENV,SAAS,CAAC,IAAM,CACdW,YAAY,CAACI,OAAO,CAAC,MAAM,CAAEF,IAAI,CAACG,SAAS,CAACR,SAAS,CAAC,CAAC,CACzD,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAS,SAAS,CAAIC,IAAI,EAAK,CAC1BT,YAAY,CAACU,SAAS,EAAI,CACxB,KAAM,CAAAC,YAAY,CAAGD,SAAS,CAACE,IAAI,CAACC,IAAI,EAAIA,IAAI,CAACC,GAAG,GAAKL,IAAI,CAACK,GAAG,CAAC,CAClE,GAAIH,YAAY,CAAE,CAChB,MAAO,CAAAD,SAAS,CAACK,GAAG,CAACF,IAAI,EACvBA,IAAI,CAACC,GAAG,GAAKL,IAAI,CAACK,GAAG,CAAAE,aAAA,CAAAA,aAAA,IAAQH,IAAI,MAAEI,QAAQ,CAAEJ,IAAI,CAACI,QAAQ,CAAG,CAAC,GAAKJ,IACrE,CAAC,CACH,CAAC,IAAM,CACL,MAAO,CAAC,GAAGH,SAAS,CAAAM,aAAA,CAAAA,aAAA,IAAOP,IAAI,MAAEQ,QAAQ,CAAE,CAAC,GAAG,CACjD,CACF,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAC,cAAc,CAAIC,EAAE,EAAK,CAC7BnB,YAAY,CAACU,SAAS,EAAIA,SAAS,CAACU,MAAM,CAACP,IAAI,EAAIA,IAAI,CAACC,GAAG,GAAKK,EAAE,CAAC,CAAC,CACtE,CAAC,CAED,KAAM,CAAAE,cAAc,CAAGA,CAACF,EAAE,CAAEF,QAAQ,GAAK,CACvC,GAAIA,QAAQ,EAAI,CAAC,CAAE,CACjBC,cAAc,CAACC,EAAE,CAAC,CACpB,CAAC,IAAM,CACLnB,YAAY,CAACU,SAAS,EACpBA,SAAS,CAACK,GAAG,CAACF,IAAI,EAChBA,IAAI,CAACC,GAAG,GAAKK,EAAE,CAAAH,aAAA,CAAAA,aAAA,IAAQH,IAAI,MAAEI,QAAQ,GAAKJ,IAC5C,CACF,CAAC,CACH,CACF,CAAC,CAED,KAAM,CAAAS,SAAS,CAAGA,CAAA,GAAM,CACtBtB,YAAY,CAAC,EAAE,CAAC,CAClB,CAAC,CAED,KAAM,CAAAuB,YAAY,CAAGA,CAAA,GAAM,CACzB,MAAO,CAAAxB,SAAS,CAACyB,MAAM,CAAC,CAACC,KAAK,CAAEZ,IAAI,GAAKY,KAAK,CAAGZ,IAAI,CAACa,KAAK,CAAGb,IAAI,CAACI,QAAQ,CAAE,CAAC,CAAC,CACjF,CAAC,CAED,KAAM,CAAAU,YAAY,CAAGA,CAAA,GAAM,CACzB,MAAO,CAAA5B,SAAS,CAACyB,MAAM,CAAC,CAACI,KAAK,CAAEf,IAAI,GAAKe,KAAK,CAAGf,IAAI,CAACI,QAAQ,CAAE,CAAC,CAAC,CACpE,CAAC,CAED,KAAM,CAAAY,KAAK,CAAG,CACZ9B,SAAS,CACTS,SAAS,CACTU,cAAc,CACdG,cAAc,CACdC,SAAS,CACTC,YAAY,CACZI,YACF,CAAC,CAED,mBACElC,IAAA,CAACC,WAAW,CAACoC,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAA/B,QAAA,CAChCA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}