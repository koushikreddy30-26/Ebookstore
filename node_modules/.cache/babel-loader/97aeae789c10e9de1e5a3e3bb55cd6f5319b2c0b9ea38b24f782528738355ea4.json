{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import BookCard from'./BookCard';import SearchBox from'./SearchBox';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=()=>{const[books,setBooks]=useState([]);const[filteredBooks,setFilteredBooks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedGenre,setSelectedGenre]=useState('All');const fetchBooks=useCallback(async function(){let searchQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';try{setLoading(true);let url='/api/books';const params=new URLSearchParams();if(searchQuery)params.append('search',searchQuery);if(selectedGenre!=='All')params.append('genre',selectedGenre);if(params.toString())url+=\"?\".concat(params.toString());const res=await axios.get(url);setBooks(res.data);setFilteredBooks(res.data);setError(null);}catch(err){setError('Failed to fetch books');console.error(err);}finally{setLoading(false);}},[selectedGenre]);useEffect(()=>{fetchBooks();},[selectedGenre,fetchBooks]);const filterBooksByGenre=useCallback(()=>{if(selectedGenre==='All'){setFilteredBooks(books);}else{setFilteredBooks(books.filter(book=>book.genre===selectedGenre));}},[books,selectedGenre]);useEffect(()=>{filterBooksByGenre();},[filterBooksByGenre]);const handleSearch=query=>{fetchBooks(query);};const handleGenreChange=genre=>{setSelectedGenre(genre);};const genres=['All','Romance','Fiction','Fantasy','Mystery','Biography','History','Science Fiction','Self-Help','Business','Technology','Psychology','Philosophy','Non-Fiction'];if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{children:error});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"EBOOKSTORE\"}),/*#__PURE__*/_jsx(SearchBox,{onSearch:handleSearch}),/*#__PURE__*/_jsxs(\"div\",{className:\"genre-filter\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Filter by Genre: \"}),/*#__PURE__*/_jsx(\"select\",{value:selectedGenre,onChange:e=>handleGenreChange(e.target.value),children:genres.map(genre=>/*#__PURE__*/_jsx(\"option\",{value:genre,children:genre},genre))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"book-grid\",children:filteredBooks.map(book=>/*#__PURE__*/_jsx(BookCard,{book:book},book._id))})]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","BookCard","SearchBox","jsx","_jsx","jsxs","_jsxs","HomePage","books","setBooks","filteredBooks","setFilteredBooks","loading","setLoading","error","setError","selectedGenre","setSelectedGenre","fetchBooks","searchQuery","arguments","length","undefined","url","params","URLSearchParams","append","toString","concat","res","get","data","err","console","filterBooksByGenre","filter","book","genre","handleSearch","query","handleGenreChange","genres","children","onSearch","className","value","onChange","e","target","map","_id"],"sources":["C:/Users/koushik reddy/Desktop/ebooksore_08/src/HomePage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport BookCard from './BookCard';\r\nimport SearchBox from './SearchBox';\r\n\r\nconst HomePage = () => {\r\n  const [books, setBooks] = useState([]);\r\n  const [filteredBooks, setFilteredBooks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [selectedGenre, setSelectedGenre] = useState('All');\r\n\r\n  const fetchBooks = useCallback(async (searchQuery = '') => {\r\n    try {\r\n      setLoading(true);\r\n      let url = '/api/books';\r\n      const params = new URLSearchParams();\r\n      if (searchQuery) params.append('search', searchQuery);\r\n      if (selectedGenre !== 'All') params.append('genre', selectedGenre);\r\n      if (params.toString()) url += `?${params.toString()}`;\r\n      const res = await axios.get(url);\r\n      setBooks(res.data);\r\n      setFilteredBooks(res.data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError('Failed to fetch books');\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [selectedGenre]);\r\n\r\n  useEffect(() => {\r\n    fetchBooks();\r\n  }, [selectedGenre, fetchBooks]);\r\n\r\n  const filterBooksByGenre = useCallback(() => {\r\n    if (selectedGenre === 'All') {\r\n      setFilteredBooks(books);\r\n    } else {\r\n      setFilteredBooks(books.filter(book => book.genre === selectedGenre));\r\n    }\r\n  }, [books, selectedGenre]);\r\n\r\n  useEffect(() => {\r\n    filterBooksByGenre();\r\n  }, [filterBooksByGenre]);\r\n\r\n  const handleSearch = (query) => {\r\n    fetchBooks(query);\r\n  };\r\n\r\n  const handleGenreChange = (genre) => {\r\n    setSelectedGenre(genre);\r\n  };\r\n\r\n  const genres = ['All', 'Romance', 'Fiction', 'Fantasy', 'Mystery', 'Biography', 'History', 'Science Fiction', 'Self-Help', 'Business', 'Technology', 'Psychology', 'Philosophy', 'Non-Fiction'];\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div>{error}</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h1>EBOOKSTORE</h1>\r\n      <SearchBox onSearch={handleSearch} />\r\n      <div className=\"genre-filter\">\r\n        <label>Filter by Genre: </label>\r\n        <select value={selectedGenre} onChange={(e) => handleGenreChange(e.target.value)}>\r\n          {genres.map(genre => (\r\n            <option key={genre} value={genre}>{genre}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div className=\"book-grid\">\r\n        {filteredBooks.map(book => (\r\n          <BookCard key={book._id} book={book} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,SAAS,KAAM,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,aAAa,CAAEC,gBAAgB,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACmB,aAAa,CAAEC,gBAAgB,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAEzD,KAAM,CAAAqB,UAAU,CAAGnB,WAAW,CAAC,gBAA4B,IAArB,CAAAoB,WAAW,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,EAAE,CACpD,GAAI,CACFP,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CAAAU,GAAG,CAAG,YAAY,CACtB,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,eAAe,CAAC,CAAC,CACpC,GAAIN,WAAW,CAAEK,MAAM,CAACE,MAAM,CAAC,QAAQ,CAAEP,WAAW,CAAC,CACrD,GAAIH,aAAa,GAAK,KAAK,CAAEQ,MAAM,CAACE,MAAM,CAAC,OAAO,CAAEV,aAAa,CAAC,CAClE,GAAIQ,MAAM,CAACG,QAAQ,CAAC,CAAC,CAAEJ,GAAG,MAAAK,MAAA,CAAQJ,MAAM,CAACG,QAAQ,CAAC,CAAC,CAAE,CACrD,KAAM,CAAAE,GAAG,CAAG,KAAM,CAAA7B,KAAK,CAAC8B,GAAG,CAACP,GAAG,CAAC,CAChCd,QAAQ,CAACoB,GAAG,CAACE,IAAI,CAAC,CAClBpB,gBAAgB,CAACkB,GAAG,CAACE,IAAI,CAAC,CAC1BhB,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAE,MAAOiB,GAAG,CAAE,CACZjB,QAAQ,CAAC,uBAAuB,CAAC,CACjCkB,OAAO,CAACnB,KAAK,CAACkB,GAAG,CAAC,CACpB,CAAC,OAAS,CACRnB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACG,aAAa,CAAC,CAAC,CAEnBlB,SAAS,CAAC,IAAM,CACdoB,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACF,aAAa,CAAEE,UAAU,CAAC,CAAC,CAE/B,KAAM,CAAAgB,kBAAkB,CAAGnC,WAAW,CAAC,IAAM,CAC3C,GAAIiB,aAAa,GAAK,KAAK,CAAE,CAC3BL,gBAAgB,CAACH,KAAK,CAAC,CACzB,CAAC,IAAM,CACLG,gBAAgB,CAACH,KAAK,CAAC2B,MAAM,CAACC,IAAI,EAAIA,IAAI,CAACC,KAAK,GAAKrB,aAAa,CAAC,CAAC,CACtE,CACF,CAAC,CAAE,CAACR,KAAK,CAAEQ,aAAa,CAAC,CAAC,CAE1BlB,SAAS,CAAC,IAAM,CACdoC,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,CAACA,kBAAkB,CAAC,CAAC,CAExB,KAAM,CAAAI,YAAY,CAAIC,KAAK,EAAK,CAC9BrB,UAAU,CAACqB,KAAK,CAAC,CACnB,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAIH,KAAK,EAAK,CACnCpB,gBAAgB,CAACoB,KAAK,CAAC,CACzB,CAAC,CAED,KAAM,CAAAI,MAAM,CAAG,CAAC,KAAK,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,WAAW,CAAE,SAAS,CAAE,iBAAiB,CAAE,WAAW,CAAE,UAAU,CAAE,YAAY,CAAE,YAAY,CAAE,YAAY,CAAE,aAAa,CAAC,CAE/L,GAAI7B,OAAO,CAAE,mBAAOR,IAAA,QAAAsC,QAAA,CAAK,YAAU,CAAK,CAAC,CACzC,GAAI5B,KAAK,CAAE,mBAAOV,IAAA,QAAAsC,QAAA,CAAM5B,KAAK,CAAM,CAAC,CAEpC,mBACER,KAAA,QAAAoC,QAAA,eACEtC,IAAA,OAAAsC,QAAA,CAAI,YAAU,CAAI,CAAC,cACnBtC,IAAA,CAACF,SAAS,EAACyC,QAAQ,CAAEL,YAAa,CAAE,CAAC,cACrChC,KAAA,QAAKsC,SAAS,CAAC,cAAc,CAAAF,QAAA,eAC3BtC,IAAA,UAAAsC,QAAA,CAAO,mBAAiB,CAAO,CAAC,cAChCtC,IAAA,WAAQyC,KAAK,CAAE7B,aAAc,CAAC8B,QAAQ,CAAGC,CAAC,EAAKP,iBAAiB,CAACO,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAAH,QAAA,CAC9ED,MAAM,CAACQ,GAAG,CAACZ,KAAK,eACfjC,IAAA,WAAoByC,KAAK,CAAER,KAAM,CAAAK,QAAA,CAAEL,KAAK,EAA3BA,KAAoC,CAClD,CAAC,CACI,CAAC,EACN,CAAC,cACNjC,IAAA,QAAKwC,SAAS,CAAC,WAAW,CAAAF,QAAA,CACvBhC,aAAa,CAACuC,GAAG,CAACb,IAAI,eACrBhC,IAAA,CAACH,QAAQ,EAAgBmC,IAAI,CAAEA,IAAK,EAArBA,IAAI,CAACc,GAAkB,CACvC,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3C,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}