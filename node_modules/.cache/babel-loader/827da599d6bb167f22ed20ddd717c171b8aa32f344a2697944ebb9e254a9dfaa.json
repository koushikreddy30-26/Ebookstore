{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useParams}from'react-router-dom';import axios from'axios';import{useCart}from'./CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookPage=()=>{const{id}=useParams();const[book,setBook]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const{addToCart}=useCart();const fetchBook=useCallback(async()=>{try{setLoading(true);const res=await axios.get(\"/api/books/\".concat(id));setBook(res.data);setError(null);}catch(err){setError('Failed to fetch book');console.error(err);}finally{setLoading(false);}},[id]);useEffect(()=>{fetchBook();},[fetchBook]);const handleAddToCart=()=>{addToCart(book);};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{children:error});if(!book)return/*#__PURE__*/_jsx(\"div\",{children:\"Book not found\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:book.title}),/*#__PURE__*/_jsx(\"img\",{src:book.imageUrl||'/placeholder-book.jpg',alt:book.title,style:{maxWidth:'300px'}}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Author:\"}),\" \",book.author]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Genre:\"}),\" \",book.genre]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" $\",book.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Stock:\"}),\" \",book.stock]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",book.description]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,className:\"btn\",children:\"Add to Cart\"})]});};export default BookPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","axios","useCart","jsx","_jsx","jsxs","_jsxs","BookPage","id","book","setBook","loading","setLoading","error","setError","addToCart","fetchBook","res","get","concat","data","err","console","handleAddToCart","children","title","src","imageUrl","alt","style","maxWidth","author","genre","price","stock","description","onClick","className"],"sources":["C:/Users/koushik reddy/Desktop/ebooksore_08/src/BookPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useCart } from './CartContext';\r\n\r\nconst BookPage = () => {\r\n  const { id } = useParams();\r\n  const [book, setBook] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { addToCart } = useCart();\r\n\r\n  const fetchBook = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(`/api/books/${id}`);\r\n      setBook(res.data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError('Failed to fetch book');\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    fetchBook();\r\n  }, [fetchBook]);\r\n\r\n  const handleAddToCart = () => {\r\n    addToCart(book);\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div>{error}</div>;\r\n  if (!book) return <div>Book not found</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h1>{book.title}</h1>\r\n      <img src={book.imageUrl || '/placeholder-book.jpg'} alt={book.title} style={{ maxWidth: '300px' }} />\r\n      <p><strong>Author:</strong> {book.author}</p>\r\n      <p><strong>Genre:</strong> {book.genre}</p>\r\n      <p><strong>Price:</strong> ${book.price}</p>\r\n      <p><strong>Stock:</strong> {book.stock}</p>\r\n      <p><strong>Description:</strong> {book.description}</p>\r\n      <button onClick={handleAddToCart} className=\"btn\">Add to Cart</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAEC,EAAG,CAAC,CAAGR,SAAS,CAAC,CAAC,CAC1B,KAAM,CAACS,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAEkB,SAAU,CAAC,CAAGb,OAAO,CAAC,CAAC,CAE/B,KAAM,CAAAc,SAAS,CAAGjB,WAAW,CAAC,SAAY,CACxC,GAAI,CACFa,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAK,GAAG,CAAG,KAAM,CAAAhB,KAAK,CAACiB,GAAG,eAAAC,MAAA,CAAeX,EAAE,CAAE,CAAC,CAC/CE,OAAO,CAACO,GAAG,CAACG,IAAI,CAAC,CACjBN,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAE,MAAOO,GAAG,CAAE,CACZP,QAAQ,CAAC,sBAAsB,CAAC,CAChCQ,OAAO,CAACT,KAAK,CAACQ,GAAG,CAAC,CACpB,CAAC,OAAS,CACRT,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACJ,EAAE,CAAC,CAAC,CAERV,SAAS,CAAC,IAAM,CACdkB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAO,eAAe,CAAGA,CAAA,GAAM,CAC5BR,SAAS,CAACN,IAAI,CAAC,CACjB,CAAC,CAED,GAAIE,OAAO,CAAE,mBAAOP,IAAA,QAAAoB,QAAA,CAAK,YAAU,CAAK,CAAC,CACzC,GAAIX,KAAK,CAAE,mBAAOT,IAAA,QAAAoB,QAAA,CAAMX,KAAK,CAAM,CAAC,CACpC,GAAI,CAACJ,IAAI,CAAE,mBAAOL,IAAA,QAAAoB,QAAA,CAAK,gBAAc,CAAK,CAAC,CAE3C,mBACElB,KAAA,QAAAkB,QAAA,eACEpB,IAAA,OAAAoB,QAAA,CAAKf,IAAI,CAACgB,KAAK,CAAK,CAAC,cACrBrB,IAAA,QAAKsB,GAAG,CAAEjB,IAAI,CAACkB,QAAQ,EAAI,uBAAwB,CAACC,GAAG,CAAEnB,IAAI,CAACgB,KAAM,CAACI,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAQ,CAAE,CAAE,CAAC,cACrGxB,KAAA,MAAAkB,QAAA,eAAGpB,IAAA,WAAAoB,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACf,IAAI,CAACsB,MAAM,EAAI,CAAC,cAC7CzB,KAAA,MAAAkB,QAAA,eAAGpB,IAAA,WAAAoB,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACf,IAAI,CAACuB,KAAK,EAAI,CAAC,cAC3C1B,KAAA,MAAAkB,QAAA,eAAGpB,IAAA,WAAAoB,QAAA,CAAQ,QAAM,CAAQ,CAAC,KAAE,CAACf,IAAI,CAACwB,KAAK,EAAI,CAAC,cAC5C3B,KAAA,MAAAkB,QAAA,eAAGpB,IAAA,WAAAoB,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACf,IAAI,CAACyB,KAAK,EAAI,CAAC,cAC3C5B,KAAA,MAAAkB,QAAA,eAAGpB,IAAA,WAAAoB,QAAA,CAAQ,cAAY,CAAQ,CAAC,IAAC,CAACf,IAAI,CAAC0B,WAAW,EAAI,CAAC,cACvD/B,IAAA,WAAQgC,OAAO,CAAEb,eAAgB,CAACc,SAAS,CAAC,KAAK,CAAAb,QAAA,CAAC,aAAW,CAAQ,CAAC,EACnE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}